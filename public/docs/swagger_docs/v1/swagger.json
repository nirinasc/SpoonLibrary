{
  "swagger": "2.0",
  "info": {
    "title": "API V1",
    "version": "v1"
  },
  "paths": {
    "/api/auth/login": {
      "parameters": [
        {
          "name": "credentials",
          "in": "body",
          "required": true,
          "schema": {
            "type": "object",
            "properties": {
              "username": {
                "type": "string"
              },
              "password": {
                "type": "string"
              }
            }
          }
        }
      ],
      "post": {
        "responses": {
          "200": {
            "examples": {
              "application/json": {
                "auth_token": "eyJhbGciOiJIUzI1NiJ9.eyJ1c2VyX2lkIjoyLCJleHAiOjE1NTI1Njg2NjZ9.YyTEK_i4_cS-vGBxirxsJxWFd-SWZNyU35r1xBMBMVw"
              }
            },
            "description": "success authentication"
          },
          "401": {
            "examples": {
              "application/json": {
                "message": "Account not active"
              }
            },
            "description": "unauthorized user"
          },
          "400": {
            "examples": {
              "application/json": {
                "message": "Invalid credentials"
              }
            },
            "description": "bad request"
          }
        },
        "summary": "authenticate a user",
        "consumes": [
          "application/json"
        ],
        "produces": [
          "application/json"
        ]
      }
    },
    "/api/books": {
      "get": {
        "responses": {
          "200": {
            "examples": {
              "application/json": [
                {
                  "id": 150,
                  "name": "book-29",
                  "isbn": "535747307-2",
                  "author": "",
                  "description": "Charnel fainted amorphous loathsome daemoniac noisome unutterable foetid.",
                  "cover_image": {
                    "url": null,
                    "thumbnail": {
                      "url": null
                    },
                    "medium": {
                      "url": null
                    }
                  },
                  "number_of_pages": 819,
                  "format": "paper",
                  "publisher": "Harlequin Enterprises Ltd",
                  "pub_date": "2019-01-09",
                  "language": "french",
                  "available": false,
                  "created_at": "2019-03-13T13:04:27.168Z",
                  "comments_count": 0
                },
                {
                  "id": 149,
                  "name": "book-28",
                  "isbn": "515281686-5",
                  "author": "",
                  "description": "Tenebrous hideous amorphous cat foetid unnamable accursed immemorial swarthy.",
                  "cover_image": {
                    "url": null,
                    "thumbnail": {
                      "url": null
                    },
                    "medium": {
                      "url": null
                    }
                  },
                  "number_of_pages": 612,
                  "format": "paper",
                  "publisher": "Elsevier",
                  "pub_date": "2018-08-15",
                  "language": "french",
                  "available": true,
                  "created_at": "2019-03-13T13:04:27.164Z",
                  "comments_count": 0
                },
                {
                  "id": 148,
                  "name": "book-27",
                  "isbn": "147680235-1",
                  "author": "",
                  "description": "Noisome tenebrous unutterable unmentionable fungus foetid.",
                  "cover_image": {
                    "url": null,
                    "thumbnail": {
                      "url": null
                    },
                    "medium": {
                      "url": null
                    }
                  },
                  "number_of_pages": 208,
                  "format": "paper",
                  "publisher": "Indiana University Press",
                  "pub_date": "2018-10-04",
                  "language": "english",
                  "available": false,
                  "created_at": "2019-03-13T13:04:27.160Z",
                  "comments_count": 0
                },
                {
                  "id": 147,
                  "name": "book-26",
                  "isbn": "008931360-7",
                  "author": "",
                  "description": "Cyclopean antediluvian unmentionable accursed madness.",
                  "cover_image": {
                    "url": null,
                    "thumbnail": {
                      "url": null
                    },
                    "medium": {
                      "url": null
                    }
                  },
                  "number_of_pages": 852,
                  "format": "paper",
                  "publisher": "George Routledge & Sons",
                  "pub_date": "2019-01-30",
                  "language": "english",
                  "available": false,
                  "created_at": "2019-03-13T13:04:27.157Z",
                  "comments_count": 0
                },
                {
                  "id": 146,
                  "name": "book-25",
                  "isbn": "353593265-3",
                  "author": "",
                  "description": "Spectral mortal gibbering loathsome comprehension daemoniac eldritch foetid.",
                  "cover_image": {
                    "url": null,
                    "thumbnail": {
                      "url": null
                    },
                    "medium": {
                      "url": null
                    }
                  },
                  "number_of_pages": 792,
                  "format": "paper",
                  "publisher": "Breslov Research Institute",
                  "pub_date": "2017-09-10",
                  "language": "french",
                  "available": false,
                  "created_at": "2019-03-13T13:04:27.153Z",
                  "comments_count": 0
                },
                {
                  "id": 145,
                  "name": "book-24",
                  "isbn": "654739281-3",
                  "author": "",
                  "description": "Antiquarian dank blasphemous cyclopean mortal.",
                  "cover_image": {
                    "url": null,
                    "thumbnail": {
                      "url": null
                    },
                    "medium": {
                      "url": null
                    }
                  },
                  "number_of_pages": 811,
                  "format": "paper",
                  "publisher": "Apress",
                  "pub_date": "2018-11-19",
                  "language": "english",
                  "available": false,
                  "created_at": "2019-03-13T13:04:27.149Z",
                  "comments_count": 0
                },
                {
                  "id": 144,
                  "name": "book-23",
                  "isbn": "008838941-3",
                  "author": "",
                  "description": "Decadent cyclopean unnamable tentacles.",
                  "cover_image": {
                    "url": null,
                    "thumbnail": {
                      "url": null
                    },
                    "medium": {
                      "url": null
                    }
                  },
                  "number_of_pages": 688,
                  "format": "paper",
                  "publisher": "Hackett Publishing Company",
                  "pub_date": "2017-10-18",
                  "language": "english",
                  "available": true,
                  "created_at": "2019-03-13T13:04:27.145Z",
                  "comments_count": 0
                },
                {
                  "id": 143,
                  "name": "book-22",
                  "isbn": "010907985-X",
                  "author": "",
                  "description": "Indescribable abnormal gibbous tenebrous amorphous stygian iridescence.",
                  "cover_image": {
                    "url": null,
                    "thumbnail": {
                      "url": null
                    },
                    "medium": {
                      "url": null
                    }
                  },
                  "number_of_pages": 816,
                  "format": "paper",
                  "publisher": "Koren Publishers Jerusalem",
                  "pub_date": "2019-03-05",
                  "language": "french",
                  "available": true,
                  "created_at": "2019-03-13T13:04:27.142Z",
                  "comments_count": 0
                },
                {
                  "id": 142,
                  "name": "book-21",
                  "isbn": "884585749-2",
                  "author": "",
                  "description": "Unutterable decadent gambrel ululate furtive.",
                  "cover_image": {
                    "url": null,
                    "thumbnail": {
                      "url": null
                    },
                    "medium": {
                      "url": null
                    }
                  },
                  "number_of_pages": 631,
                  "format": "paper",
                  "publisher": "Applewood Books",
                  "pub_date": "2018-05-26",
                  "language": "english",
                  "available": true,
                  "created_at": "2019-03-13T13:04:27.137Z",
                  "comments_count": 0
                },
                {
                  "id": 141,
                  "name": "book-20",
                  "isbn": "280932274-0",
                  "author": "",
                  "description": "Stench blasphemous foetid stygian unmentionable non-euclidean spectral accursed.",
                  "cover_image": {
                    "url": null,
                    "thumbnail": {
                      "url": null
                    },
                    "medium": {
                      "url": null
                    }
                  },
                  "number_of_pages": 421,
                  "format": "paper",
                  "publisher": "Burns & Oates",
                  "pub_date": "2017-09-05",
                  "language": "french",
                  "available": true,
                  "created_at": "2019-03-13T13:04:27.133Z",
                  "comments_count": 0
                }
              ]
            },
            "description": "successful"
          }
        },
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "q[name_cont]",
            "in": "query",
            "type": "string"
          },
          {
            "name": "q[categories_id_eq]",
            "in": "query",
            "type": "string"
          },
          {
            "name": "q[library_id_eq]",
            "in": "query",
            "type": "string"
          }
        ],
        "summary": "books list",
        "produces": [
          "application/json"
        ]
      }
    },
    "/api/books/{id}": {
      "get": {
        "responses": {
          "200": {
            "examples": {
              "application/json": {
                "id": 210,
                "name": "book-29",
                "isbn": "509535460-8",
                "author": "",
                "description": "Stench antiquarian dank unnamable eldritch nameless charnel manuscript.",
                "cover_image": {
                  "url": null,
                  "thumbnail": {
                    "url": null
                  },
                  "medium": {
                    "url": null
                  }
                },
                "number_of_pages": 721,
                "format": "paper",
                "publisher": "Charles Scribner's Sons",
                "pub_date": "2017-10-29",
                "language": "french",
                "available": false,
                "created_at": "2019-03-13T13:04:27.453Z",
                "comments_count": 0,
                "library": {
                  "id": 14,
                  "name": "library-1"
                },
                "categories": [
                  {
                    "id": 21,
                    "name": "category-2"
                  }
                ]
              }
            },
            "description": "successful"
          },
          "404": {
            "examples": {
              "application/json": {
                "message": "Couldn't find Book with 'id'=999999999999999999"
              }
            },
            "description": "404 Not Found"
          }
        },
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "id",
            "in": "path",
            "type": "string",
            "required": true
          }
        ],
        "summary": "show book detail",
        "produces": [
          "application/json"
        ]
      }
    },
    "/api/categories": {
      "get": {
        "responses": {
          "200": {
            "examples": {
              "application/json": [
                {
                  "id": 36,
                  "name": "category-1",
                  "description": "Fungus dank effulgence squamous foetid cat."
                }
              ]
            },
            "description": "successful"
          }
        },
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "q[name_cont]",
            "in": "query",
            "type": "string"
          }
        ],
        "summary": "categories list",
        "produces": [
          "application/json"
        ]
      }
    },
    "/api/books/{book_id}/comments": {
      "parameters": [
        {
          "name": "book_id",
          "in": "path",
          "type": "string",
          "required": true
        },
        {
          "name": "Authorization",
          "in": "header",
          "type": "string"
        }
      ],
      "get": {
        "responses": {
          "200": {
            "description": "successful"
          }
        },
        "summary": "book comments list",
        "produces": [
          "application/json"
        ]
      },
      "post": {
        "responses": {
          "201": {
            "description": "comment created"
          },
          "422": {
            "description": "content empty or too short"
          }
        },
        "parameters": [
          {
            "name": "comment",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "properties": {
                "content": {
                  "type": "string"
                }
              }
            }
          }
        ],
        "summary": "create comment",
        "consumes": [
          "application/json"
        ]
      }
    },
    "/api/libraries": {
      "get": {
        "responses": {
          "200": {
            "examples": {
              "application/json": [
                {
                  "id": 32,
                  "name": "library-1",
                  "country_code": "ST",
                  "city": "Wayneville",
                  "address": "35469 Cummerata Mount",
                  "zip_code": "39354-8810",
                  "phone": "307.608.4066 x26006"
                }
              ]
            },
            "description": "successful"
          }
        },
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          },
          {
            "name": "q[name_cont]",
            "in": "query",
            "type": "string"
          }
        ],
        "summary": "libraries list",
        "produces": [
          "application/json"
        ]
      }
    },
    "/api/logs/loans": {
      "parameters": [
        {
          "name": "Authorization",
          "in": "header",
          "type": "string"
        }
      ],
      "get": {
        "responses": {
          "200": {
            "description": "successful"
          }
        },
        "parameters": [
          {
            "name": "q[returned_eq]",
            "in": "query",
            "type": "string"
          }
        ],
        "summary": "book loans list",
        "produces": [
          "application/json"
        ]
      }
    },
    "/api/logs/returns": {
      "parameters": [
        {
          "name": "Authorization",
          "in": "header",
          "type": "string"
        }
      ],
      "get": {
        "responses": {
          "200": {
            "description": "successful"
          }
        },
        "parameters": [
          {
            "name": "q[book_id_eq]",
            "in": "query",
            "type": "string"
          },
          {
            "name": "q[loan_id_eq]",
            "in": "query",
            "type": "string"
          }
        ],
        "summary": "book returns list",
        "produces": [
          "application/json"
        ]
      }
    },
    "/api/logs/{loan_id}/returns": {
      "parameters": [
        {
          "name": "loan_id",
          "in": "path",
          "type": "string",
          "required": true
        },
        {
          "name": "Authorization",
          "in": "header",
          "type": "string"
        }
      ],
      "post": {
        "responses": {
          "201": {
            "description": "successful"
          },
          "422": {
            "description": "book loan is not valid"
          },
          "404": {
            "description": "book loan does not exists"
          }
        },
        "summary": "return a book"
      }
    },
    "/api/logs/{book_id}/loans": {
      "parameters": [
        {
          "name": "book_id",
          "in": "path",
          "type": "string",
          "required": true
        },
        {
          "name": "Authorization",
          "in": "header",
          "type": "string"
        }
      ],
      "post": {
        "responses": {
          "201": {
            "description": "successful"
          },
          "422": {
            "description": "book is not available"
          },
          "404": {
            "description": "book does not exists"
          }
        },
        "summary": "loan a book"
      }
    },
    "/api/users/me": {
      "get": {
        "responses": {
          "200": {
            "examples": {
              "application/json": {
                "id": 34,
                "firstname": "Thanh",
                "lastname": "Walter",
                "username": "user53",
                "email": "marshallarmstrong@braunwest.name",
                "role": "admin",
                "country_code": "CA",
                "city": "West Birgitton",
                "address": "852 Dallas Vista",
                "zip_code": "43391-5769",
                "phone": "276-172-1984",
                "created_at": "2019-03-13T13:04:28.893Z"
              }
            },
            "description": "successful"
          }
        },
        "parameters": [
          {
            "name": "Authorization",
            "in": "header",
            "type": "string"
          }
        ],
        "summary": "retrieve current user info",
        "produces": [
          "application/json"
        ]
      }
    }
  }
}
